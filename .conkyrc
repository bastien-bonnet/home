conky.config = {
	use_xft = true,
	font = 'DejaVu Sans:size=9',
	xftalpha = 0.98,
	text_buffer_size = 2048,
	update_interval = 2,
	total_run_times = 0,

	-- Use double buffering (reduces flicker, may not work for everyone)
	double_buffer = true,

	-- Conky window parameters
	alignment = 'top_right',
	gap_x = 0,
	gap_y = 0,
	minimum_height = 0,
	minimum_width = 600,
	maximum_width = 600,

	-- Borders
	draw_shades = false,
	draw_outline = false,
	draw_borders = false,
	stippled_borders = 0,
	border_inner_margin = 20,
	border_width = 1,

	-- Default colors and also border colors
	default_color = 'lightgrey',
	own_window_colour = 'black',

	-- Subtract file system buffers from used memory?
	no_buffers = true,

	-- number of cpu samples to average
	-- set to 1 to disable averaging
	cpu_avg_samples = 4,

	-- number of net samples to average
	-- set to 1 to disable averaging
	net_avg_samples = 2,

	-- Force UTF8? note that UTF8 support required XFT
	override_utf8_locale = true,

	-- Adds spaces around certain objects to stop them from moving other things around. Only helps with mono font
	-- use_spacer = 'right',

	pad_percents = 3,
	short_units = true,

	-- Create own window instead of using desktop (required in some file managers like nautilus)
	own_window = true,
	own_window_argb_visual = true,

	-- If own_window is yes, you may use type normal, desktop or override
	own_window_type = 'normal',

	-- Use pseudo transparency with own_window?
	own_window_transparent = true,

	-- Window color (if own_window_transparent is set to no)
	--own_window_colour 242520

	own_window_hints = 'undecorated,below,sticky,skip_taskbar,skip_pager',

	default_bar_width = 200, default_bar_height = 8,

	lua_load = '~/.conky_bg.lua',
	lua_draw_hook_pre = 'draw_bg',


	-- To make the following work, you need to do :
	-- sudo modprobe coretemp
	-- edit /etc/modules and add the line 'coretemp'
	-- sudo apt-get install lm-sensors

	-- Cpu core temperature for a given core number
	template0 = [[${execi 5 sensors | grep -i "core $(expr \1 % 4):" | sed 's/.*\ \ +//' | sed 's/C\ *(.*$//'}]],

	-- Cpu info for a given core
	template1 = [[${alignr}Core \1: ${template0 \1} ${cpubar cpu\1}]],

	-- Process by cpu
	template7 = [[${goto 420}${top name \1}${font DejaVu Sans Mono:size=9}${alignr}    ${top cpu \1}${font}]],

	-- Process by mem
	template8 = [[${goto 420}${top_mem name \1} ${font DejaVu Sans Mono:size=9}${alignr}${top_mem mem \1}${font}]],

	-- Network connection info
	template4 = [[\1: ${addr \1}${goto 370}${font FontAwesome} ${font}${upspeed \1}${alignr}${font FontAwesome} ${font}${downspeed \1}]],

	-- Font Awesome
	template2 = [[${font Font Awesome 5 Free Solid:style=Solid:size=17}\1${font}]],

	-- Section header
	template5 = [[        ${template2 \1}${goto 100}\2#]],

	-- Disk space
	-- Not using fs_bar because not counting superuser reserved space as used
	template6 = [[${alignr}\1 ${fs_size \1}, free: ${fs_free \1} ${execibar 60 df --output='pcent' \1 | tail -n 1 | grep -oE '\\w+'}]]


};


conky.text = [=[
RESSOURCES ${hr 2}

${template5  CPU}
${alignr}Physical: ${execi 5 sensors | grep Physical | grep -Eo "[[:digit:]]+\.[[:digit:]]°" | head -n 1} ${cpubar 8 cpu0}
${template1 0}
${template1 1}
${template1 2}
${template1 3}
${if_match "${execi 5 hostname | cut -d- -f2}" == "laptop"}#
${template1 4}
${template1 5}
${template1 6}
${template1 7}
${endif}#
${template7 1}
${template7 2}
${template7 3}
${template7 4}


${template5  RAM}
${alignr}${memmax}, free: ${memeasyfree} ${membar 8}
${template8 1}
${template8 2}
${template8 3}
${template8 4}


${template5  SSD}
${template6 /}
${template6 /boot}
${if_mounted /media/data}#
${template6 /media/data}
${endif}#
#
${if_match "${execi 60 hostname | cut -d- -f2}" == "laptop"}#


${template5  Bat.}
${alignr}${battery BAT0} ${battery_time BAT0} ${battery_bar BAT0}#
${endif}


SYSTEM ${hr 2}

        ${font OpenLogos:size=18}u${font}${goto 100}${execi 36000 lsb_release -rs} (${kernel})${alignr}${font FontAwesome}${font} ${uptime_short}${voffset 20}
${template5   GPU}
 driver version: ${execi 600 [ "$(prime-select query)" = "nvidia" ] && nvidia-settings -q  NvidiaDriverVersion | grep Version | sed 's/^.*:\ //' | head -n 1 || echo "nvidia GPU off"}#
${alignr}${font FontAwesome}${font} ${if_match "${execi 600 prime-select query}"=="nvidia"}${nvidia temp}°C${else}nvidia GPU off${endif}


NETWORK ${hr 2}

${template5   }
${template4 enp5s0}
${if_match "${execi 30 hostname | cut -d- -f2}" == "laptop"}
${template5   }
${template4 wlp2s0}
${goto 100}${wireless_essid wlp2s0} ${wireless_link_bar 8,80 wlp2s0}
${endif}


WEATHER ${hr 2}

${font DejaVu Sans Mono:size=8}#
${execpi 3600 ~/.scripts/conky_weather.bash}
${font}

${alignr}${font DejaVu Sans:size=26}${time %H:%M}${font}
${alignr}${time %a %d %b %Y}
${voffset -10}#
]=];
